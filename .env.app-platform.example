# DigitalOcean App Platform Environment Variables Template
# Copy these to App Platform UI under Environment Variables
# DO NOT commit actual credentials to git

# ===========================
# Node Environment
# ===========================
NODE_ENV=production

# ===========================
# Database (Managed PostgreSQL)
# ===========================
# DigitalOcean provides DATABASE_URL automatically for managed databases
DATABASE_URL=${db.DATABASE_URL}
DB_SSL=true
DATABASE_CA_CERT=${db.CA_CERT}

# ===========================
# Redis (Managed Redis)
# ===========================
# DigitalOcean provides REDIS_URL automatically for managed Redis
REDIS_URL=${redis.REDIS_URL}

# ===========================
# JWT Configuration
# ===========================
# Generate with: openssl rand -base64 32
JWT_SECRET=<ROTATE_THIS_IN_PRODUCTION>
JWT_EXPIRY=1h

# ===========================
# Session Management
# ===========================
# Generate with: openssl rand -base64 32
SESSION_SECRET=<ROTATE_THIS_IN_PRODUCTION>

# ===========================
# OAuth Encryption
# ===========================
# Generate with: openssl rand -base64 32
OAUTH_ENCRYPTION_KEY=<ROTATE_THIS_IN_PRODUCTION>

# ===========================
# Google OAuth
# ===========================
# Update in Google Cloud Console for App Platform URLs
# Authorized redirect URIs: https://fluxstudio-*.ondigitalocean.app/api/integrations/google/callback
GOOGLE_CLIENT_ID=<UPDATE_IN_GOOGLE_CONSOLE>
GOOGLE_CLIENT_SECRET=<ROTATE_IN_GOOGLE_CONSOLE>
VITE_GOOGLE_CLIENT_ID=<SAME_AS_ABOVE>

# ===========================
# GitHub OAuth
# ===========================
# Update in GitHub Settings > Developer settings > OAuth Apps
# Authorization callback URL: https://fluxstudio-*.ondigitalocean.app/api/integrations/github/callback
GITHUB_CLIENT_ID=<UPDATE_IN_GITHUB>
GITHUB_CLIENT_SECRET=<ROTATE_IN_GITHUB>

# ===========================
# Figma OAuth
# ===========================
# Update in Figma Developer Settings
# Redirect URI: https://fluxstudio-*.ondigitalocean.app/api/integrations/figma/callback
FIGMA_CLIENT_ID=<UPDATE_IN_FIGMA>
FIGMA_CLIENT_SECRET=<ROTATE_IN_FIGMA>
FIGMA_WEBHOOK_SECRET=<GENERATE_NEW_SECRET>

# ===========================
# Slack OAuth
# ===========================
# Update in Slack API > Your Apps
# Redirect URLs: https://fluxstudio-*.ondigitalocean.app/api/integrations/slack/callback
SLACK_CLIENT_ID=<UPDATE_IN_SLACK>
SLACK_CLIENT_SECRET=<ROTATE_IN_SLACK>
SLACK_SIGNING_SECRET=<ROTATE_IN_SLACK>

# ===========================
# GitHub Webhooks
# ===========================
# Generate with: openssl rand -hex 32
# Configure in GitHub repo settings > Webhooks
GITHUB_WEBHOOK_SECRET=<GENERATE_NEW_SECRET>

# ===========================
# CORS Configuration
# ===========================
# App Platform provides APP_URL automatically
CORS_ORIGINS=https://fluxstudio.art,https://www.fluxstudio.art,https://fluxstudio-*.ondigitalocean.app,${APP_URL}

# ===========================
# Service URLs (App Platform Internal)
# ===========================
# App Platform provides these automatically via component references
AUTH_SERVICE_URL=${APP_URL}
MESSAGING_SERVICE_URL=${APP_URL}
COLLAB_SERVICE_URL=${APP_URL}

# ===========================
# Rate Limiting
# ===========================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=50
AUTH_RATE_LIMIT_MAX=3

# ===========================
# SMTP (Email Service)
# ===========================
# Update with your email provider credentials
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=<YOUR_SMTP_USER>
SMTP_PASSWORD=<ROTATE_THIS>
EMAIL_FROM=noreply@fluxstudio.art

# ===========================
# File Upload Configuration
# ===========================
MAX_FILE_SIZE=104857600
UPLOAD_DIR=/app/uploads
ALLOWED_FILE_TYPES=png,jpg,jpeg,gif,pdf,doc,docx,txt,mp4,mov,avi

# ===========================
# Feature Flags
# ===========================
ENABLE_REGISTRATION=true
ENABLE_OAUTH=true
ENABLE_FILE_UPLOAD=true
ENABLE_WEBSOCKET=true
ENABLE_MESSAGE_INTELLIGENCE=true
ENABLE_REALTIME_COLLABORATION=true
ENABLE_WORKFLOW_ORCHESTRATION=true
ENABLE_VISUAL_ANNOTATIONS=true
ENABLE_VERSION_TRACKING=true
MAINTENANCE_MODE=false

# ===========================
# Monitoring & Observability
# ===========================
# Optional: Sentry DSN for error tracking
SENTRY_DSN=<OPTIONAL_SENTRY_DSN>
LOG_LEVEL=info
ENABLE_ACCESS_LOGS=true
ENABLE_ERROR_TRACKING=true

# ===========================
# Frontend Configuration
# ===========================
# App Platform provides APP_URL, use it for frontend
VITE_API_BASE_URL=/api
VITE_AUTH_URL=/api/auth
VITE_MESSAGING_URL=/api/messaging
VITE_SOCKET_URL=wss://${APP_URL}
VITE_APP_URL=${APP_URL}

# ===========================
# Build Configuration
# ===========================
VITE_BUILD_MODE=production
VITE_CACHE_BUSTING=true
VITE_MINIFY=true
VITE_OPTIMIZE_DEPS=true

# ===========================
# Security Configuration
# ===========================
SECURE_COOKIES=true
CSRF_PROTECTION=true

# ===========================
# Performance Configuration
# ===========================
ENABLE_COMPRESSION=true
ENABLE_CACHING=true
CACHE_MAX_AGE=86400

# ===========================
# CRITICAL NEXT STEPS
# ===========================
# 1. Run scripts/generate-production-secrets.sh locally
# 2. Copy ALL generated secrets to DigitalOcean App Platform Environment Variables
# 3. Mark secrets as "Encrypted" in App Platform UI
# 4. Update ALL OAuth provider settings with new App Platform URLs
# 5. Test OAuth flows after deployment
# 6. NEVER commit actual secrets to git
