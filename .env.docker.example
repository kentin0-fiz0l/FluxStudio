# FluxStudio Docker Environment Configuration
# Copy this file to .env and customize for your environment
#
# SECURITY WARNING: Never commit .env files with real credentials to version control!

# =============================================================================
# CORE SETTINGS
# =============================================================================

# Application environment: development, staging, production
NODE_ENV=development

# Application name and URLs
APP_NAME=FluxStudio
APP_URL=http://localhost
FRONTEND_URL=http://localhost:5173

# =============================================================================
# SERVICE PORTS
# =============================================================================

# Backend API server port
BACKEND_PORT=3001

# Frontend web server port
FRONTEND_PORT=80

# Collaboration WebSocket port
COLLAB_PORT=4000

# =============================================================================
# DATABASE (PostgreSQL)
# =============================================================================

# PostgreSQL connection details
POSTGRES_DB=fluxstudio
POSTGRES_USER=fluxstudio_user
POSTGRES_PASSWORD=change_me_in_production
POSTGRES_PORT=5432

# Full connection string (constructed from above or set directly)
# DATABASE_URL=postgresql://fluxstudio_user:password@localhost:5432/fluxstudio

# Enable database adapter (set to "true" to use PostgreSQL)
USE_DATABASE=true

# SSL mode for database connections (disable for local development)
DB_SSL=false

# =============================================================================
# REDIS (Caching & Session Store)
# =============================================================================

# Redis password
REDIS_PASSWORD=fluxstudio_redis_dev

# Redis port
REDIS_PORT=6379

# Full Redis URL (constructed from above or set directly)
# REDIS_URL=redis://:password@localhost:6379

# =============================================================================
# SECURITY
# =============================================================================

# JWT secret key (REQUIRED - generate with: openssl rand -base64 64)
# In development, a secret will be auto-generated if not set
JWT_SECRET=

# Session encryption secret (generate with: openssl rand -base64 32)
SESSION_SECRET=

# OAuth token encryption key (generate with: openssl rand -base64 32)
OAUTH_ENCRYPTION_KEY=

# JWT token expiration
JWT_EXPIRES_IN=7d

# =============================================================================
# CORS (Cross-Origin Resource Sharing)
# =============================================================================

# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:80,http://localhost:5173,http://localhost:3000

# =============================================================================
# RATE LIMITING
# =============================================================================

# Rate limit window in milliseconds (15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Maximum requests per window
RATE_LIMIT_MAX_REQUESTS=100

# Maximum authentication attempts per window
AUTH_RATE_LIMIT_MAX=5

# =============================================================================
# FILE UPLOAD
# =============================================================================

# Enable file upload feature
ENABLE_FILE_UPLOAD=true

# Upload directory (inside container)
UPLOAD_DIR=/app/uploads

# Maximum file size in bytes (50MB)
MAX_FILE_SIZE=52428800

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable user registration
ENABLE_REGISTRATION=true

# Enable OAuth authentication
ENABLE_OAUTH=true

# Enable WebSocket connections
ENABLE_WEBSOCKET=true

# =============================================================================
# OAUTH PROVIDERS (Optional)
# =============================================================================

# Google OAuth
# Create credentials at: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# GitHub OAuth
# Create OAuth App at: https://github.com/settings/developers
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# Figma OAuth
# Create app at: https://www.figma.com/developers/apps
FIGMA_CLIENT_ID=
FIGMA_CLIENT_SECRET=

# Slack OAuth
# Create app at: https://api.slack.com/apps
SLACK_CLIENT_ID=
SLACK_CLIENT_SECRET=

# =============================================================================
# EMAIL (SMTP) - Optional
# =============================================================================

# SMTP server configuration
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=

# From address for sent emails
EMAIL_FROM=noreply@fluxstudio.art

# =============================================================================
# MONITORING & LOGGING
# =============================================================================

# Sentry DSN for error tracking
SENTRY_DSN=

# Log level: debug, info, warn, error
LOG_LEVEL=info

# Log directory
LOG_DIR=./logs

# =============================================================================
# DOCKER COMPOSE PROFILES
# =============================================================================

# pgAdmin credentials (used with 'full' profile)
PGADMIN_EMAIL=admin@fluxstudio.local
PGADMIN_PASSWORD=admin

# =============================================================================
# PRODUCTION NOTES
# =============================================================================
#
# For production deployments:
#
# 1. Generate secure secrets:
#    openssl rand -base64 64  # For JWT_SECRET
#    openssl rand -base64 32  # For SESSION_SECRET, OAUTH_ENCRYPTION_KEY
#
# 2. Use managed database and Redis services (e.g., DigitalOcean Managed DB)
#
# 3. Enable SSL for database connections:
#    DB_SSL=true
#
# 4. Use HTTPS URLs:
#    APP_URL=https://fluxstudio.art
#    CORS_ORIGINS=https://fluxstudio.art
#
# 5. Configure real SMTP for email delivery
#
# 6. Set up Sentry for error tracking
#
# 7. Store secrets in environment-specific secret management
#    (e.g., DigitalOcean App Platform secrets, Kubernetes secrets)
